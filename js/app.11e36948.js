(function(e){function t(t){for(var r,a,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},s={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/vk-api-test/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"09f6":function(e,t,n){"use strict";n("bfe2")},"1d8c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("main-component")],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"main__title"},[e._v("Выбрать пользователя ВК")]),n("form",{staticClass:"main__form",on:{submit:function(t){return t.preventDefault(),e.validUser.apply(null,arguments)}}},[n("input",{ref:"userId",staticClass:"main__input",attrs:{type:"text",placeholder:"Введите id-номер пользователя",autofocus:""},on:{input:e.isClearInput}}),n("button",{ref:"btn",staticClass:"main__btn",attrs:{type:"submit",disabled:""}},[e._v("Найти")])]),e.popupFlag?n("div",{staticClass:"overlay"}):e._e(),e.popupFlag?n("div",{staticClass:"main__popup"},[e.userFirstName&&e.userLastName?n("div",[n("h5",[e._v(' По данному ID найден пользователь с именем "'+e._s(e.userFirstName)+" "+e._s(e.userLastName)+'". Добавляем на страницу? ')]),n("div",{staticClass:"main__btns"},[n("button",{staticClass:"main__btn",on:{click:e.addUser}},[e._v("Да")]),n("button",{staticClass:"main__btn",on:{click:e.toggleFlag}},[e._v("Нет")])])]):n("div",[n("h5",[e._v("Пользователь не найден (возможно, аккаунт был удалён)")]),n("div",{staticClass:"main__btns"},[n("button",{staticClass:"main__btn",on:{click:e.toggleFlag}},[e._v("Ok")])])])]):e._e(),n("users-component",{attrs:{users:e.usersArr}}),e.usersArr.length?n("build-button-component",{on:{buildFriendsList:e.buildFriendsList}}):e._e(),n("div",[e.friendsIdArr.length?n("friends-component",{attrs:{friendData:e.friendData,friendsIdArr:e.friendsIdArr,friendsUser:e.friendsUser,usersArr:e.usersArr}}):e._e()],1)],1)},o=[],c=n("b85c"),l=(n("d3b7"),n("a434"),n("4e82"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.users.length?n("div",{staticClass:"users"},[n("h4",[e._v("Выбранные пользователи")]),n("div",{staticClass:"users__container"},e._l(e.users,(function(e){return n("user-component",{key:e.id,attrs:{user:e}})})),1)]):e._e()}),d=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user.id?n("div",{staticClass:"user"},[e._v(" "+e._s(e.user.first_name)+" "+e._s(e.user.last_name)+" ")]):e._e()},f=[],p={name:"UserComponent",props:["user"]},_=p,h=(n("7709"),n("2877")),v=Object(h["a"])(_,u,f,!1,null,"a00a97fa",null),m=v.exports,b={components:{UserComponent:m},name:"UsersComponent",props:["users"]},C=b,g=(n("fdc4"),Object(h["a"])(C,l,d,!1,null,"453c5533",null)),y=g.exports,F="vk1.a.MNLuemk2d2JtaF-bqPCBKoMsHc8SHOEwcR6cvFr7stGdioSLlLefS441meA9pMHVHRl4ge9q3GkOt0Le4qlaApiAB_x0P1V783OqNAXIf5R94MGubxnRbA0_hZ6fAq657hTMyZOTMzhUd_B46AT3SOe2WeeNF9AaQu-01RgyULJjQ25aGhC1qZjt5EIPOr0a",A="https://api.vk.com/method/",w="?v=5.131&access_token=",x="users.get",P="friends.get",U="wall.get",O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"builder main__btn",on:{click:e.buildList}},[e._v("Построить")])},j=[],I={name:"BuildButtonComponent",methods:{buildList:function(){this.$emit("buildFriendsList")}}},k=I,L=(n("f3dd"),Object(h["a"])(k,O,j,!1,null,"85c47e40",null)),D=L.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friends"},[n("h4",{staticClass:"friends__title"},[e._v("Друзья выбранных пользователей")]),e.friendData.length>=e.friendsIdArr.length?n("div",{staticClass:"friends__container"},e._l(e.friendData,(function(t,r){return n("friend-component",{key:r,attrs:{friend:t,friendsUser:e.friendsUser,usersArr:e.usersArr}})})),1):n("div",{staticClass:"friends__loader"},[n("ring-loader",{attrs:{color:e.loaderColor,size:e.loaderSize}})],1)])},N=[],S=n("c0e3"),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"DELETED"!=e.friend.first_name?n("div",{ref:"card",staticClass:"friend"},[e.friend.photo_100?n("div",{staticClass:"friend__container",on:{click:e.openFriendCard}},[n("span",{staticClass:"friend__text friend__title"},[e._v(e._s(e.friend.first_name)+" "+e._s(e.friend.last_name))]),n("img",{staticClass:"friend__pict",attrs:{src:e.friend.photo_100,alt:e.friend.last_name}}),e.friend.sex?n("p",{staticClass:"friend__text"},[e._v("Пол: "+e._s(e.sexIs(e.friend.sex)))]):e._e(),e.friend.bdate?n("p",{staticClass:"friend__text"},[e._v(" Дата рождения: "+e._s(e.friend.bdate)+" ")]):e._e(),e.friend.counters?n("p",{staticClass:"friend__text"},[e._v(" Кол-во друзей: "+e._s(e.friend.counters.friends)+" ")]):e._e(),n("hr",{staticStyle:{color:"white"}}),n("div",{staticClass:"friend__text friend__amount"},[e._v(" "+e._s(e.searchUsersForFriendCard())+" в друзьях ")])]):e._e(),e.friendCardPopup.flag&&e.wallPost?n("friend-card-component",{attrs:{friend:e.friend,friendCardPopup:e.friendCardPopup,wallPost:e.wallPost}}):e._e()],1):e._e()},q=[],M=(n("4de4"),n("ac1f"),n("1276"),n("a15b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"overlay",on:{click:e.closeFriendCard}}),n("div",{staticClass:"friendcard"},[n("div",{staticClass:"cross",on:{click:e.closeFriendCard}},[e._v("×")]),n("div",{staticStyle:{display:"flex","flex-direction":"column"}},[n("span",{staticClass:"friendcard__name"},[e._v(e._s(e.friend.first_name)+" "+e._s(e.friend.last_name))]),n("img",{staticClass:"friendcard__userpict",attrs:{src:e.friend.photo_100,alt:e.friend.last_name}}),n("span",{staticClass:"friendcard__subtitle"},[e._v("Последнее сообщение на стене:")]),e.wallPost?n("div",{staticClass:"friendcard__walltext"},[e.wallPost.text?n("span",[e._v(e._s(e.wallPost.text))]):e._e(),e.wallPost.attachments?n("div",[e.wallPost.attachments[0].photo?n("img",{staticClass:"friendcard__wallpict",attrs:{src:e.wallPost.attachments[0].photo.sizes[e.wallPost.attachments[0].photo.sizes.length-1].url,title:"фото со стены пользователя"}}):e._e()]):e._e()]):e._e()])])])}),T=[],B={name:"FriendCardComponent",props:["friendCardPopup","friend","wallPost"],methods:{closeFriendCard:function(){this.friendCardPopup.flag=!1}}},z=B,R=(n("6d9a"),Object(h["a"])(z,M,T,!1,null,"6ae9b9e8",null)),G=R.exports,H={components:{FriendCardComponent:G},name:"FriendComponent",props:["friend","friendsUser","usersArr"],data:function(){return{friendCardPopup:{flag:!1},wallPost:{}}},updated:function(){this.opacityCard()},methods:{opacityCard:function(){var e,t=document.querySelectorAll(".friend"),n=Object(c["a"])(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,s=r.querySelector(".friend__amount"),i=s.textContent.split("").filter((function(e){return","==e})).length;if(i>0){var a=.4/i;r.style.backgroundColor="rgba(74, 118, 168, "+(+a+.6)+")"}}}catch(o){n.e(o)}finally{n.f()}},searchUsersForFriendCard:function(){var e=[],t="";for(var n in this.friendsUser){var r,s=Object(c["a"])(this.friendsUser[n]);try{for(s.s();!(r=s.n()).done;){var i=r.value;if(i==this.friend.id){var a,o=Object(c["a"])(this.usersArr);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.id==n&&(t=l.first_name+" "+l.last_name,e.push(t))}}catch(d){o.e(d)}finally{o.f()}}}}catch(d){s.e(d)}finally{s.f()}}return e=e.join(", "),e},sexIs:function(e){return 1==e?"женский":2==e?"мужской":0==e?"не указан":void 0},openFriendCard:function(){this.friendCardPopup.flag=!0,this.fetchWallPost(this.friend.id)},fetchWallPost:function(e){var t=this;fetch(A+U+w+F+"&owner_id="+e+"&count=1").then((function(e){return e.json()})).then((function(e){t.wallPost=e.response.items[0],void 0==t.wallPost&&alert("У пользователя на стене нет ни одной записи")})).catch((function(e){alert("Произошла ошибка запроса.")}))}}},J=H,W=(n("9330"),Object(h["a"])(J,E,q,!1,null,"7814a1a1",null)),Z=W.exports,Q={name:"FriendsComponent",data:function(){return{loaderColor:"#4a76a8",loaderSize:"100px"}},components:{FriendComponent:Z,RingLoader:S["a"]},props:["friendData","friendsIdArr","friendsUser","usersArr"]},V=Q,K=(n("09f6"),Object(h["a"])(V,$,N,!1,null,"4f868d16",null)),X=K.exports,Y={name:"MainComponent",components:{UsersComponent:y,BuildButtonComponent:D,FriendsComponent:X},data:function(){return{popupFlag:!1,currentUser:[],usersArr:[],friendsIdArr:[],friendData:[],userFirstName:"",userLastName:"",friendsUser:{}}},methods:{buildFriendsList:function(){if(this.usersArr.length){this.friendData=[];var e,t=Object(c["a"])(this.usersArr);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.fetchFriendList(n.id,P)}}catch(r){t.e(r)}finally{t.f()}}},isClearInput:function(){this.$refs.userId.value?this.$refs.btn.disabled=!1:this.$refs.btn.disabled=!0},clearInput:function(){this.$refs.userId.value&&(this.$refs.userId.value="")},validUser:function(){!isNaN(this.$refs.userId.value)&&this.$refs.userId.value>0?this.fetchData(this.$refs.userId.value,x):alert("ID пользователя должен представлять собой число больше нуля")},checkUser:function(e,t){this.userFirstName=e,this.userLastName=t},newUserToArray:function(e,t){t.push(e),e=[]},checkForUnique:function(e,t){if(e.length){var n,r=0,s=Object(c["a"])(e);try{for(s.s();!(n=s.n()).done;){var i=n.value;i.id===t.id&&r++}}catch(a){s.e(a)}finally{s.f()}0!=r?alert("Пользователь уже был ранее добавлен в список"):this.newUserToArray(t,e)}else this.newUserToArray(t,e)},addUser:function(){this.checkForUnique(this.usersArr,this.currentUser),this.toggleFlag()},toggleFlag:function(){this.popupFlag=!this.popupFlag,this.clearInput()},sortArrayByLastName:function(e,t){return e.last_name.localeCompare(t.last_name)},fetchFriendList:function(e,t){var n=this;fetch(A+t+w+F+"&user_id="+e).then((function(e){return e.json()})).then((function(t){if(n.friendsIdArr=t.response.items,n.friendsUser.userId,n.friendsUser[e]=n.friendsIdArr,n.friendsIdArr.length){var r,s=Object(c["a"])(n.friendsIdArr);try{for(s.s();!(r=s.n()).done;){var i=r.value;n.fetchFriend(i)}}catch(a){s.e(a)}finally{s.f()}}else alert("У выбранных пользователей нет открытого списка друзей")})).catch((function(t){alert("Произошла ошибка запроса. Возможно, пользователь "+e+" скрыл свой список друзей")}))},uniqueFriendList:function(e){if(e.length>1)for(var t=1;t<e.length;t++)for(var n=0;n<t;n++)e[n].id==e[t].id&&e.splice(t,1)},fetchFriend:function(e){var t=this;fetch(A+x+w+F+"&user_id="+e+"&fields=photo_100,sex,bdate,counters,is_friend").then((function(e){return e.json()})).then((function(e){t.friendData.push(e.response[0]),t.friendData=t.friendData.sort(t.sortArrayByLastName),t.uniqueFriendList(t.friendData)})).catch((function(n){t.fetchFriend(e)}))},fetchData:function(e,t){var n=this;fetch(A+t+w+F+"&user_id="+e).then((function(e){return e.json()})).then((function(e){n.checkUser(e.response[0].first_name,e.response[0].last_name),n.currentUser=e.response[0],n.toggleFlag()})).catch((function(e){alert("Произошла ошибка запроса. Возможно, введён несуществующий ID")}))}}},ee=Y,te=(n("adb8"),Object(h["a"])(ee,a,o,!1,null,null,null)),ne=te.exports,re={components:{MainComponent:ne}},se=re,ie=(n("5c0b"),Object(h["a"])(se,s,i,!1,null,null,null)),ae=ie.exports,oe=n("a18c"),ce=n.n(oe);r["a"].config.productionTip=!1,new r["a"]({router:ce.a,render:function(e){return e(ae)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"6d9a":function(e,t,n){"use strict";n("78394")},7703:function(e,t,n){},7709:function(e,t,n){"use strict";n("d373")},78394:function(e,t,n){},8687:function(e,t,n){},9330:function(e,t,n){"use strict";n("1d8c")},"9c0c":function(e,t,n){},a18c:function(e,t){},adb8:function(e,t,n){"use strict";n("d691")},bfe2:function(e,t,n){},d373:function(e,t,n){},d691:function(e,t,n){},f3dd:function(e,t,n){"use strict";n("8687")},fdc4:function(e,t,n){"use strict";n("7703")}});
//# sourceMappingURL=app.11e36948.js.map